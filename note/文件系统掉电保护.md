#### 一、背景导入

FATFS文件系统本身没有文件掉电保护的功能，当在读写文件时掉电，会导致文件的某些数据写入不可知数据，文件有可能会损坏。

#### 二、解决思路

1、创建数据备份区，将**写操作**的操作地址所在的**扇区数据**备份到数据备份区；

2、创建备份信息区，将备份想和备份信息扇区的有效标志位保存；

3、检查备份区与要写入的数据一致性，若不一致则重新开始1步骤；

4、正式进行写操作，将数据写入实际要操作的地址；

5、检查写入操作地址的与传入的数据是否一致；

